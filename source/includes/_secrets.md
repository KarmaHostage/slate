# Secrets

Secrets are cryptographically secure key-value pairs. They're isolated per applications, which means keys are unique per application. 
Secrets are encrypted at rest, using state-of-the art cryptographic algorithms. Furthermore, they are protected with ACLs, meaning only the API keys that are generated by your application will be 
able to access the secrets.

## Create a secret

```http
POST https://api.karmahostage.com/secrets
X-API-KEY: "sk_xxx"

{
   "key": "/production/application1",
   "value":"secret_code"
}
```

```shell
curl "http://api.karmahostage.com/secrets"
  -H "X-API-KEY: sk_xxx"
  -x POST
  -d '{"key":"/production/application1", "value":"secret_code"}'
```

> The above command returns JSON structured like this:

```json
  {
    "key": "/production/application1
  }
```


## Get Secret by ID

```http
GET https://api.karmahostage.com/secrets/{id}
X-API-KEY: "sk_xxx"
```

```shell
curl "http://api.karmahostage.com/secrets/{id}"
  -H "X-API-KEY: sk_xxx"
```

> The above command returns JSON structured like this:

```json
  {
    "id": "e4dea538-37d3-40df-99a7-da9992d3300c",
    "key": "very-secure-encrypted-secret/production",
    "value": "this secret is securely stored" 
  }
```

This endpoint can retrieve a cryptographically secure secret by ID. The secured secret is decrypted and access to this secret will be reflected in the logs.

## Get Secret by key

```http
GET https://api.karmahostage.com/secrets?key=very-secure-encrypted-secret/production
X-API-KEY: "sk_xxx"
```

```shell
curl "http://api.karmahostage.com/secrets?key=very-secure-encrypted-secret/production"
  -H "X-API-KEY: sk_xxx"
```

> The above command returns JSON structured like this:

```json
  {
    "id": "e4dea538-37d3-40df-99a7-da9992d3300c",
    "key": "very-secure-encrypted-secret/production",
    "value": "this secret is securely stored" 
  }
```

This endpoint can retrieve a cryptographically secure secret by path. Paths are easier to work with, as they don't require you to known the ID and can be dynamically generated. 
The secured secret is decrypted and access to this secret will be reflected in the logs.
